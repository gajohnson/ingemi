(function(){function a(b){b=b||{};this.s();this.A();this.C(b);this.B();new e(this);this.l()}function e(b){this.a=b;this.q()}a.prototype.s=function(){this.e=document.getElementById("ingemi");if(!this.e)throw Error("You must include \"<div id='ingemi'></div>\" in your markup");};a.prototype.A=function(){this.canvas=document.createElement("canvas");this.e.appendChild(this.canvas);this.c=this.canvas.getContext("2d");this.clientWidth=this.e.clientWidth;this.clientHeight=this.e.clientHeight;this.canvas.style.width=
this.clientWidth+"px";this.canvas.style.height=this.clientHeight+"px"};a.prototype.C=function(b){this.k=b.upscale||1;this.f=b.rangeLeft||1;this.g=b.rangeTop||1;this.offsetLeft=b.offsetLeft||0;this.offsetTop=b.offsetTop||0;this.i=b.maxIteration||255;this.h=b.blockSize||2500;this.o="function"===typeof b.onrender?b.onrender:null};a.prototype.B=function(){this.width=this.canvas.width=Math.floor(this.clientWidth/this.k);this.height=this.canvas.height=Math.floor(this.clientHeight/this.k);this.d=this.c.createImageData(this.width,
this.height);this.n=this.width*this.height};a.prototype.l=function(){this.G=(new Date).getTime();this.b=this.j=this.m=0;this.p()};a.prototype.p=function(){var b,c=this.h+this.b>this.n?this.n-this.b:this.h;for(b=0;b<c;b+=1){var a=this.b+b;this.D(a%this.width,Math.floor(a/this.width))}};a.prototype.D=function(b,c){var a=this;setTimeout(function(){a.F(4*a.u(b,c),a.t(b,c));a.H()},0)};a.prototype.u=function(b,a){return a*this.width+b};a.prototype.t=function(b,a){var d=3.5*this.f*b/this.width-2.5+this.offsetLeft,
e=2*this.g*a/this.height-1+this.offsetTop;if(this.w(d,e))return this.i;for(var f=0,g=0,h=0,i;4>f*f+g*g&&h<this.i;)i=f*f-g*g+d,g=2*f*g+e,f=i,h+=1;return h};a.prototype.w=function(b,a){var d=Math.pow(b-0.25,2)+a*a;return b<=Math.sqrt(d)-2*d+0.25};a.prototype.F=function(b,a){255<this.i&&(a=Math.floor(255*(a/this.i)));this.d.data[b]=a;this.d.data[b+1]=a;this.d.data[b+2]=a;this.d.data[b+3]=255};a.prototype.H=function(){this.m+=1;this.j+=1;this.m==this.n?(this.c.putImageData(this.d,0,0),this.r(),this.o&&
this.o()):this.j===this.h&&(this.b+=this.h,this.j=0,this.p())};a.prototype.r=function(){this.c.fillStyle="rgba(255, 255, 255, 1)";this.c.fillRect(0,30,this.width,2);this.c.fillRect(30,0,2,this.height)};a.prototype.z=function(){console.log("Rendered "+this.width+" * "+this.height+" pixels in "+((new Date).getTime()-this.G)/1E3+" seconds.")};e.prototype.q=function(){var b=this;this.a.e.addEventListener("click",function(a){b.v(a.offsetX,a.offsetY)})};e.prototype.v=function(a,c){var a=a/this.a.k,c=c/
this.a.k,d=c/this.a.height-0.5;this.a.offsetLeft+=3.5*(a/this.a.width-0.5)*this.a.f;this.a.offsetTop+=2*d*this.a.g;this.a.f/=2;this.a.g/=2;this.a.offsetLeft+=1.75*this.a.f;this.a.offsetTop+=this.a.g;this.a.l()};window.Ingemi=a;a.prototype.render=a.prototype.l;a.prototype.logStats=a.prototype.z})();
