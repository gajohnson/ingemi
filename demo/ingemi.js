var c;Ingemi=function(b,a){if(!b||"DIV"!=b.nodeName)throw Error("You must specify Ingemi's container");a=a||{};this.i=b;this.x=a.x||0;this.y=a.y||0;this.a=a.z||1;this.s=a.maxIteration||255;this.h=a.sample||1;this.k=a.workers||1;this.e=3.5;this.f=2;this.l=this.m=0;this.j=[];for(var e=0;e<this.k;e++)this.j.push(new Worker("w.mandelbrot.js"));this.b=this.d=this.canvas=null;this.c=this.height=this.width=this.n=this.clientHeight=this.clientWidth=0};c=Ingemi.prototype;
c.q=function(){console.time("total");var b=this;b.r();b.t();for(var a=0;a<b.k;a++)b.j[a].onmessage=function(a){a=new Uint8ClampedArray(a.data.imagedata,0,4*b.c);b.b=b.d.createImageData(b.width,b.height);b.b.data.set(a);b.p()}};c.r=function(){this.canvas=document.createElement("canvas");this.i.appendChild(this.canvas);this.d=this.canvas.getContext("2d")};
c.t=function(){this.clientWidth=this.i.clientWidth;this.clientHeight=this.i.clientHeight;this.width=Math.floor(this.clientWidth/this.h);this.height=Math.floor(this.clientHeight/this.h);this.canvas.style.width=this.clientWidth+"px";this.canvas.style.height=this.clientHeight+"px";this.n=Math.round(this.clientWidth*this.f/this.e)/this.clientHeight;this.c=this.width*this.height;this.m=this.c/this.k;this.b=this.d.createImageData(this.width,this.height)};
c.g=function(){console.time("render");this.l=0;var b=this.b.data.buffer,a={},e=a.state={},d=a.settings={};e.x=this.x;e.y=this.y;e.z=this.a;e.blockOffset=this.l;d.dx=this.e;d.dy=this.f;d.forcedHeight=this.n;d.blockSize=this.m;d.totalPixels=this.c;d.width=this.width;d.height=this.height;d.maxIteration=this.s;a.buffer=b;this.j[0].postMessage(a,[b])};
c.p=function(){this.canvas.width=this.width;this.canvas.height=this.height;this.d.putImageData(this.b,0,0);console.timeEnd("render");console.timeEnd("total");console.log("Total Pixels:",this.c)};c.zoom=function(b){this.a*=b;this.g()};c.o=function(b,a){this.x+=(b/this.h/this.width-0.5)*this.e*this.a;this.y+=(a/this.h/this.height-0.5)*this.f*this.a;this.g()};c.reset=function(){this.y=this.x=0;this.a=1};
c.random=function(){this.a=1/Math.pow(2,Math.floor(22*Math.random())+10);this.x=this.e*(Math.random()-0.5);this.y=this.f*(Math.random()-0.5);this.g()};window.Ingemi=Ingemi;Ingemi.prototype.init=Ingemi.prototype.q;Ingemi.prototype.render=Ingemi.prototype.g;Ingemi.prototype.zoom=Ingemi.prototype.zoom;Ingemi.prototype.center=Ingemi.prototype.o;Ingemi.prototype.reset=Ingemi.prototype.reset;Ingemi.prototype.random=Ingemi.prototype.random;
