<!doctype html>
<html>
    <head>
        <title>Ingemi Demo</title>

        <!-- Add these lines to your page -->
        <link rel='stylesheet' href='css/demo.css' />
        <script type='text/javascript' src='js/ingemi.js'></script>
    </head>
    <body>
        <div id='controlPanel'>
            <div id='zoomOut' class='button'>-</div>
            <div id='zoomIn' class='button'>+</div>
            <span class='button'>'W' - Zoom In</span>
            <span class='button'>'S' - Zoom Out</span>
            <span class='button'>Direction Keys - Pan</span>
            <span class='button'>Click - Center</span></span>
        </div>

        <!-- Position and style this element however you see fit -->
        <div id='ingemi'></div>
        <script type='text/javascript'>
            var parentDiv = document.getElementById('ingemi');
            var ingemi = new Ingemi(parentDiv, {

            }); // Add any additional configuration here
            ingemi.init();
            ingemi.render();

            parentDiv.addEventListener('click', function(e) {
                ingemi.center(e.clientX, e.clientY);
            });

            var testLoop = null;
            var test = function() {
                ingemi.zoom(1/1.05);
                testLoop = setTimeout(test, 0);
            };
            addEventListener('keydown', function (e) {
                switch (e.keyCode) {
                    case 82: // R
                        ingemi.random();
                        break;
                    case 87: // W
                        ingemi.zoom(1/1.05);
                        break;
                    case 83: // S
                        ingemi.zoom(2);
                        break;
                    case 84: // T
                        if (testLoop) {
                            clearTimeout(testLoop);
                            testLoop = null;
                            ingemi.average();
                        } else {
                            console.log('START TEST: ' + ingemi.canvas.clientWidth + ' x ' + ingemi.canvas.clientHeight);
                            ingemi.center(0, ingemi.canvas.clientHeight / 2);
                            test();
                        }
                        break;
                    case 37: // Left
                        ingemi.center(0, ingemi.canvas.clientHeight / 2);
                        break;
                    case 39: // Right
                        ingemi.center(ingemi.canvas.clientWidth, ingemi.canvas.clientHeight / 2);
                        break;
                    case 38: // Up
                        ingemi.center(ingemi.canvas.clientWidth / 2, 0);
                        break;
                    case 40: // Down
                        ingemi.center(ingemi.canvas.clientWidth / 2, ingemi.canvas.clientHeight);
                        break;
                    case 90: // Z
                        ingemi.save();
                        break;
                }
            });

            var zoomIn = document.getElementById('zoomIn');
            var zoomOut = document.getElementById('zoomOut');
            zoomIn.addEventListener('click', function(e) {
                ingemi.zoom(1 / 2);
            });
            zoomOut.addEventListener('click', function(e) {
                ingemi.zoom(2);
            });
        </script>
    </body>
</html>